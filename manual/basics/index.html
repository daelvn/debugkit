



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.1">
    
    
      
        <title>Basics - debugkit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#debugkit-basics" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="debugkit" class="md-header-nav__button md-logo">
          
            <i class="md-icon">bug_report</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              debugkit
            </span>
            <span class="md-header-nav__topic">
              
                Basics
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/daelvn/debugkit/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daelvn/debugkit
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../module/inspect/" class="md-tabs__link">
          Modules
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" class="md-tabs__link md-tabs__link--active">
          Manual
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="debugkit" class="md-nav__button md-logo">
      
        <i class="md-icon">bug_report</i>
      
    </a>
    debugkit
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/daelvn/debugkit/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daelvn/debugkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module/inspect/" title="debugkit.inspect" class="md-nav__link">
      debugkit.inspect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Log
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Log
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module/log/init/" title="debugkit.log.init" class="md-nav__link">
      debugkit.log.init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module/log/loggers/" title="debugkit.log.loggers" class="md-nav__link">
      debugkit.log.loggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module/log/sinks/" title="debugkit.log.sinks" class="md-nav__link">
      debugkit.log.sinks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Basics
      </label>
    
    <a href="./" title="Basics" class="md-nav__link md-nav__link--active">
      Basics
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#inspecting" class="md-nav__link">
    Inspecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headers-and-footers" class="md-nav__link">
    Headers and footers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    Tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#levels" class="md-nav__link">
    Levels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinks" class="md-nav__link">
    Sinks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#inspecting" class="md-nav__link">
    Inspecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headers-and-footers" class="md-nav__link">
    Headers and footers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    Tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#levels" class="md-nav__link">
    Levels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinks" class="md-nav__link">
    Sinks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/daelvn/debugkit/edit/master/docs/manual/basics.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="debugkit-basics">debugkit Basics<a class="headerlink" href="#debugkit-basics" title="Permanent link">&para;</a></h1>
<p>This manual covers the basics of logging and inspecting using
debugkit.</p>
<h2 id="inspecting">Inspecting<a class="headerlink" href="#inspecting" title="Permanent link">&para;</a></h2>
<p>There is not much to this, you simply import the function
and use it exactly the same way as you would with <a href="https://github.com/kikito/inspect.lua">inspect.lua</a>.</p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">inspect</span> <span class="o">=</span> <span class="nb">require</span><span class="s2">&quot;debugkit.inspect&quot;</span><span class="p">.</span><span class="n">inspect</span>
<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="n">inspect</span> <span class="k">from</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">debugkit.inspect</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">inspect</span> <span class="n">t</span>
</pre></div></div>
</div>
<h2 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h2>
<h3 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>Logging is a bit more complex. For a simple task such as the usual
print debugging, you might just want to use the minimal logger.</p>
<div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">logger</span>         <span class="o">=</span> <span class="nb">require</span><span class="s2">&quot;debugkit.log&quot;</span><span class="p">.</span><span class="n">logger</span>
<span class="n">myLogger</span>       <span class="o">=</span> <span class="n">logger</span><span class="p">.</span><span class="n">minimal</span><span class="p">()</span>
<span class="n">myLogger</span><span class="p">.</span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
<span class="n">log</span>            <span class="o">=</span> <span class="n">myLogger</span> <span class="s2">&quot;all&quot;</span>

<span class="n">log</span><span class="p">(</span><span class="s2">&quot;tag&quot;</span><span class="p">,</span> <span class="s2">&quot;msg&quot;</span><span class="p">)</span>
</pre></div></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="n">logger</span> <span class="k">from</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">debugkit.log</span><span class="s2">&quot;</span>
<span class="n">myLogger</span>       <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">minimal</span><span class="o">!</span>
<span class="n">myLogger</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">all</span><span class="s2">&quot;</span>
<span class="n">log</span>            <span class="o">=</span> <span class="n">myLogger</span> <span class="s2">&quot;</span><span class="s">all</span><span class="s2">&quot;</span>

<span class="n">log</span> <span class="s2">&quot;</span><span class="s">msg</span><span class="s2">&quot;</span>
</pre></div></div>
</div>
<p>This works if you're print-debugging. However, if you need actual
logging with time, levels, tags. That will not suffice.</p>
<h3 id="headers-and-footers">Headers and footers<a class="headerlink" href="#headers-and-footers" title="Permanent link">&para;</a></h3>
<p>Before anything else, you will want to know how headers and footers
work for properly printing messages (or logging them into a file).</p>
<p>These are obtained by the logger by calling <code class="codehilite"><span class="n">self</span><span class="o">:</span><span class="n">header</span><span class="o">()</span></code>
and <code class="codehilite"><span class="n">self</span><span class="o">:</span><span class="n">footer</span><span class="o">()</span></code> (or <code class="codehilite"><span class="err">@header!</span></code> and <code class="codehilite"><span class="err">@footer!</span></code> if you
are using MoonScript) from within the Logger function. They must be
functions so things like setting the level, time and date work.
Let's look at the definition of a header.</p>
<div class="superfences-tabs">
<input name="__tabs_3" type="radio" id="__tab_3_0" checked="checked" />
<label for="__tab_3_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">logger</span><span class="p">.</span><span class="n">example</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span> <span class="kr">return</span> <span class="n">Logger</span> <span class="p">{</span>
    <span class="n">header</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
      <span class="kr">return</span> <span class="p">(</span><span class="s2">&quot;%s %s [%s]&quot;</span><span class="p">):</span><span class="n">format</span> <span class="n">self</span><span class="p">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">level</span>
    <span class="kr">end</span>
  <span class="p">}</span>
<span class="kr">end</span>
</pre></div></div>
<input name="__tabs_3" type="radio" id="__tab_3_1" />
<label for="__tab_3_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">example</span> <span class="o">=</span> <span class="nf">-&gt;</span> <span class="nc">Logger</span> <span class="nv">header:</span> <span class="kt">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">level</span><span class="kt">)</span> <span class="nf">=&gt;</span> <span class="s2">&quot;</span><span class="s">#{@time!} #{@name} [#{level}]</span><span class="s2">&quot;</span>
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Footers work exactly the same way, getting passed self, tag and
level.</p>
</div>
<p>As we can see, the header function takes the header itself and the
level for the message, and then returns a formatted string. It calls
time so that it returns a different time each time. <code class="codehilite"><span class="err">time</span></code> is defined
as:</p>
<div class="superfences-tabs">
<input name="__tabs_4" type="radio" id="__tab_4_0" checked="checked" />
<label for="__tab_4_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">logger</span><span class="p">.</span><span class="n">example</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span> <span class="kr">return</span> <span class="n">Logger</span> <span class="p">{</span>
    <span class="n">time</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="kr">return</span> <span class="nb">os.date</span> <span class="s2">&quot;%X&quot;</span> <span class="kr">end</span>
  <span class="p">}</span>
<span class="kr">end</span>
</pre></div></div>
<input name="__tabs_4" type="radio" id="__tab_4_1" />
<label for="__tab_4_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">example</span> <span class="o">=</span> <span class="nf">-&gt;</span> <span class="nc">Logger</span> <span class="nv">time:</span> <span class="nf">=&gt;</span> <span class="nb">os.date</span> <span class="s2">&quot;</span><span class="s">%X</span><span class="s2">&quot;</span>
</pre></div></div>
</div>
<p>Now, you might want to make your header depend on the level being
used, say, for coloring differently. Let's check the definition in
the <a href="/module/loggers/">loggers</a> module.</p>
<div class="superfences-tabs">
<input name="__tabs_5" type="radio" id="__tab_5_0" checked="checked" />
<label for="__tab_5_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="c1">-- leveled logger</span>
<span class="n">logger</span><span class="p">.</span><span class="n">leveled</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span>
  <span class="kr">return</span> <span class="n">Logger</span><span class="p">({</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">base</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">(</span><span class="n">style</span><span class="p">(</span><span class="s2">&quot;%{white bold}&quot;</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">self</span><span class="p">:</span><span class="n">time</span><span class="p">())</span> <span class="o">..</span> <span class="s2">&quot; %{green}&quot;</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">self</span><span class="p">:</span><span class="n">time</span><span class="p">())</span> <span class="o">..</span> <span class="s2">&quot; &quot;</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
      <span class="kr">end</span><span class="p">,</span>
      <span class="n">levels</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">none</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">white</span><span class="p">(</span><span class="s2">&quot;[NONE]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[NONE] &quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">debug</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">white</span><span class="p">.</span><span class="n">bluebg</span><span class="p">(</span><span class="s2">&quot;[DEBUG]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[DEBUG]&quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">info</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">cyan</span><span class="p">(</span><span class="s2">&quot;[INFO]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[INFO] &quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">green</span><span class="p">(</span><span class="s2">&quot;[OK]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[OK]   &quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">warn</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">yellow</span><span class="p">(</span><span class="s2">&quot;[WARN]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[WARN] &quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="nb">error</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">red</span><span class="p">(</span><span class="s2">&quot;[ERROR]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[ERROR]&quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">fatal</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">white</span><span class="p">.</span><span class="n">redbg</span><span class="p">(</span><span class="s2">&quot;[FATAL]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[FATAL]&quot;</span>
        <span class="kr">end</span><span class="p">,</span>
        <span class="n">all</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
          <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="ow">and</span> <span class="p">((</span><span class="n">style</span><span class="p">.</span><span class="n">black</span><span class="p">.</span><span class="n">whitebg</span><span class="p">(</span><span class="s2">&quot;[ALL]&quot;</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">style</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">)))</span> <span class="ow">or</span> <span class="s2">&quot;[ALL]  &quot;</span>
        <span class="kr">end</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="n">header</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
      <span class="kr">return</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">base</span><span class="p">(</span><span class="n">self</span><span class="p">))</span> <span class="o">..</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">levels</span><span class="p">[</span><span class="n">level</span><span class="p">](</span><span class="n">self</span><span class="p">))</span>
    <span class="kr">end</span>
  <span class="p">})</span>
<span class="kr">end</span>
</pre></div></div>
<input name="__tabs_5" type="radio" id="__tab_5_1" />
<label for="__tab_5_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="c1">-- Leveled logger</span>
<span class="n">logger</span><span class="o">.</span><span class="n">leveled</span> <span class="o">=</span> <span class="nf">-&gt;</span> <span class="nc">Logger</span> <span class="kt">{</span>
  <span class="nv">headers:</span>        <span class="kt">{</span>
    <span class="nv">base:</span> <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">(</span><span class="n">style</span> <span class="s2">&quot;</span><span class="s">%{white bold}#{@time!} %{green}#{@name} </span><span class="s2">&quot;</span><span class="kt">)</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">#{@time!} #{@name}</span><span class="s2">&quot;</span>
    <span class="nv">levels:</span>
      <span class="nv">none:</span>  <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">white</span>         <span class="s2">&quot;</span><span class="s">[NONE]</span><span class="s2">&quot;</span> <span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s">  </span><span class="s2">&quot;</span>  <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[NONE] </span><span class="s2">&quot;</span>
      <span class="nv">debug:</span> <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="n">bluebg</span>  <span class="s2">&quot;</span><span class="s">[DEBUG]</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s"> </span><span class="s2">&quot;</span>   <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[DEBUG]</span><span class="s2">&quot;</span>
      <span class="nv">info:</span>  <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">cyan</span>          <span class="s2">&quot;</span><span class="s">[INFO]</span><span class="s2">&quot;</span> <span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s">  </span><span class="s2">&quot;</span>  <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[INFO] </span><span class="s2">&quot;</span>
      <span class="nv">ok:</span>    <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">green</span>         <span class="s2">&quot;</span><span class="s">[OK]</span><span class="s2">&quot;</span>   <span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s">    </span><span class="s2">&quot;</span><span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[OK]   </span><span class="s2">&quot;</span>
      <span class="nv">warn:</span>  <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">yellow</span>        <span class="s2">&quot;</span><span class="s">[WARN]</span><span class="s2">&quot;</span> <span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s">  </span><span class="s2">&quot;</span>  <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[WARN] </span><span class="s2">&quot;</span>
      <span class="nv">error:</span> <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">red</span>           <span class="s2">&quot;</span><span class="s">[ERROR]</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s"> </span><span class="s2">&quot;</span>   <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[ERROR]</span><span class="s2">&quot;</span>
      <span class="nv">fatal:</span> <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="n">redbg</span>   <span class="s2">&quot;</span><span class="s">[FATAL]</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s"> </span><span class="s2">&quot;</span>   <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[FATAL]</span><span class="s2">&quot;</span>
      <span class="nv">all:</span>   <span class="nf">=&gt;</span> <span class="vc">@color</span> <span class="k">and</span> <span class="kt">((</span><span class="n">style</span><span class="o">.</span><span class="n">black</span><span class="o">.</span><span class="n">whitebg</span> <span class="s2">&quot;</span><span class="s">[ALL]</span><span class="s2">&quot;</span>  <span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="n">style</span><span class="o">.</span><span class="n">reset</span> <span class="s2">&quot;</span><span class="s">   </span><span class="s2">&quot;</span> <span class="kt">))</span> <span class="k">or</span> <span class="s2">&quot;</span><span class="s">[ALL]  </span><span class="s2">&quot;</span>   
  <span class="kt">}</span>
  <span class="nv">header:</span> <span class="kt">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">level</span><span class="kt">)</span> <span class="nf">=&gt;</span> <span class="kt">(</span><span class="vc">@headers</span><span class="o">.</span><span class="n">base</span> <span class="vc">@</span><span class="kt">)</span> <span class="o">..</span> <span class="kt">(</span><span class="vc">@headers</span><span class="o">.</span><span class="n">levels</span><span class="kt">[</span><span class="n">level</span><span class="kt">]</span> <span class="vc">@</span><span class="kt">)</span>
<span class="kt">}</span>
</pre></div></div>
</div>
<p>It is pretty much self-explanatory. The logger calls <code class="codehilite"><span class="err">header</span></code>, and
this uses a base in the table <code class="codehilite"><span class="err">headers</span></code> and a level from
<code class="codehilite"><span class="err">headers.levels</span></code>. That is a way of making changing headers, but you
can customize it as you wish.</p>
<h3 id="tags">Tags<a class="headerlink" href="#tags" title="Permanent link">&para;</a></h3>
<p>Tags are a really simple concept that allow you to exclude and filter
messages depending on their "topic". For example, I am logging two
things at debug level, one is about strings and the other about
numbers. If I am debugging numbers, I will only want to know about
the number messages.</p>
<p>Loggers let you prefix a tag to your message, like <code class="codehilite"><span class="err">log(&quot;tag&quot;, &quot;msg&quot;)</span></code>
, and using a table in the logger, <code class="codehilite"><span class="err">exclude</span></code>, you can filter out the
messages that are in the table <code class="codehilite"><span class="err">exclude</span></code>. So I would do:</p>
<div class="codehilite"><pre><span></span><span class="n">myLogger</span><span class="p">.</span><span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="n">log</span>              <span class="o">=</span> <span class="n">myLogger</span> <span class="s2">&quot;debug&quot;</span>

<span class="n">log</span> <span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;will not print&quot;</span><span class="p">)</span>
<span class="n">log</span> <span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;will print&quot;</span><span class="p">)</span>
</pre></div>

<p>And now it will only print the second message.</p>
<h3 id="levels">Levels<a class="headerlink" href="#levels" title="Permanent link">&para;</a></h3>
<p>Levels are the way of filtering out whole categories of messages.
<a href="/module/log/loggers/#logger_leveled"><code class="codehilite"><span class="err">logger.leveled</span></code></a> has 7:</p>
<ul>
<li>none</li>
<li>debug</li>
<li>info</li>
<li>ok</li>
<li>warn</li>
<li>error</li>
<li>fatal</li>
<li>all</li>
</ul>
<p>These are in order, from least important to most important. Using the
function <a href="/module/log/init/#levels"><code class="codehilite"><span class="err">levels</span></code></a>, you can pass it an
ordered list of levels and you will get a reversed table back (
keys become values, values become keys), making each level a certain
number. Now, when you log a message with a level, it checks its number
, and the sink (usually) will only print if the message level is equal
or superior to the minimum level (set in <code class="codehilite"><span class="err">Logger.level</span></code>).</p>
<h3 id="sinks">Sinks<a class="headerlink" href="#sinks" title="Permanent link">&para;</a></h3>
<p>You can use a different sink with a logger just by changing the
<code class="codehilite"><span class="err">Logger.sink</span></code> component. For example, I can make <code class="codehilite"><span class="err">logger.leveled</span></code>
print JSON strings doing:</p>
<div class="codehilite"><pre><span></span><span class="n">myLogger</span>      <span class="o">=</span> <span class="n">logger</span><span class="p">.</span><span class="n">minimal</span><span class="p">()</span>
<span class="n">myLogger</span><span class="p">.</span><span class="n">sink</span> <span class="o">=</span> <span class="n">sink</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">log</span>           <span class="o">=</span> <span class="n">myLogger</span><span class="p">()</span>
</pre></div>

<p>It's really simple and works on the fly, but if you change the sink
after it has been opened, you will need to close the previous one, then change it, then open it manually again, like this:</p>
<div class="superfences-tabs">
<input name="__tabs_6" type="radio" id="__tab_6_0" checked="checked" />
<label for="__tab_6_0">Lua</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">myLogger</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="n">myLogger</span><span class="p">.</span><span class="n">sink</span> <span class="o">=</span> <span class="n">sink</span><span class="p">.</span><span class="n">file</span> <span class="s2">&quot;example.log&quot;</span>
<span class="n">myLogger</span><span class="p">:</span><span class="n">open</span><span class="p">()</span>
</pre></div></div>
<input name="__tabs_6" type="radio" id="__tab_6_1" />
<label for="__tab_6_1">MoonScript</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">myLogger</span><span class="o">\</span><span class="n">close</span><span class="o">!</span>
<span class="n">myLogger</span><span class="o">.</span><span class="n">sink</span> <span class="o">=</span> <span class="n">sink</span><span class="o">.</span><span class="n">file</span> <span class="s2">&quot;</span><span class="s">example.log</span><span class="s2">&quot;</span>
<span class="n">myLogger</span><span class="o">\</span><span class="n">open</span><span class="o">!</span>
</pre></div></div>
</div>
<p>Not all sinks need to be opened, but you won't get an error from
trying to open one which doesn't have an <code class="codehilite"><span class="err">open</span></code> method, or from
trying to close one which doesn't have a <code class="codehilite"><span class="err">close</span></code> method.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../module/log/sinks/" title="debugkit.log.sinks" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                debugkit.log.sinks
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/daelvn" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://queer.party/@daelvn" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8e03edeb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>